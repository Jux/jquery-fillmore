/*!
 * jQuery Fillmore
 * Version 1.0.0
 * https://github.com/Gjslick/jquery-fillmore
 *
 * Add a dynamically-resized background image to any element
 *
 * Copyright (c) 2011 Gregory Jacobs (jux.com)
 * Dual licensed under the MIT and GPL licenses.
 */
(function(c){var b={centeredX:true,centeredY:true,speed:0};var a=function(f){var e="absolute";this.settings=c.extend({},b);var d=this.$containerEl=this.$containerSizingEl=c(f);d.css("background","transparent");if(d.is("body")){this.$containerSizingEl=("onorientationchange" in window)?c(document):c(window);e="fixed"}else{this.originalContainerOverflow=d[0].style.overflow;d.css("overflow","hidden");if(d.css("position")==="static"){d.css("position","relative");this.containerPositionModified=true}if(d.css("z-index")==="auto"){d.css("z-index",0);this.containerZIndexModified=true}}this.$fillmoreEl=c('<div style="left: 0; top: 0; position: '+e+'; overflow: hidden; z-index: -999999; margin: 0; padding: 0; height: 100%; width: 100%;" />').appendTo(d);this.adjustBGProxy=c.proxy(this.adjustBG,this);c(window).resize(this.adjustBGProxy)};c.extend(a.prototype,{$imgEl:null,imgRatio:null,containerPositionModified:false,containerZIndexModified:false,updateSettings:function(d){this.settings=c.extend(this.settings,d)},showImage:function(d,e){this.$fillmoreEl.find("img").addClass("deletable");this.$imgEl=c('<img style="position: absolute; display: none; margin: 0; padding: 0; border: none; z-index: -999999;" />').bind("load",c.proxy(function(f){this.onImageLoaded(f,e)},this)).appendTo(this.$fillmoreEl);this.$imgEl.attr("src",d)},onImageLoaded:function(e,i){var g=e.target,h=this.$fillmoreEl;this.$imgEl.css({width:"auto",height:"auto"});var f=g.width||this.$imgEl.width(),d=g.height||this.$imgEl.height();this.imgRatio=f/d;this.adjustBG();this.$imgEl.fadeIn(this.settings.speed,function(){h.find("img.deletable").remove();if(typeof i==="function"){i()}})},adjustBG:function(){if(this.$imgEl){try{var d=this.settings,f=this.$containerEl,j=this.$containerSizingEl,m=j.outerHeight()||j.height(),k=j.outerWidth()||j.width(),i={left:0,top:0},h=k,g=h/this.imgRatio,l;if(g>=m){l=(g-m)/2;if(d.centeredY){c.extend(i,{top:"-"+l+"px"})}}else{g=m;h=g*this.imgRatio;l=(h-k)/2;if(d.centeredX){c.extend(i,{left:"-"+l+"px"})}}this.$fillmoreEl.width(h).height(g);this.$imgEl.width(h).height(g).css(i)}catch(e){}}},destroy:function(){if(this.containerPositionModified){this.$containerEl.css("position","")}if(this.containerZIndexModified){this.$containerEl.css("z-index","")}this.$containerEl.css("overflow",this.originalContainerOverflow);this.$fillmoreEl.remove();c(window).unbind("resize",this.adjustBGProxy);this.$containerEl.removeData("fillmore")}});c.fn.fillmore=function(d){return this.each(function(e,h){var g=c(h),f=g.data("fillmore");if(!f){f=new a(h);g.data("fillmore",f)}if(typeof d==="object"){f.updateSettings(d);f.showImage(d.src,d.callback)}else{if(typeof d==="string"){f[d].apply(f,Array.prototype.slice.call(arguments,1))}}})};c.fillmore=function(d){c("body").fillmore(d)}})(jQuery);